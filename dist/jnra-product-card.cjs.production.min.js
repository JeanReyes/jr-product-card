"use strict";function e(e){return e&&"object"==typeof e&&"default"in e?e.default:e}Object.defineProperty(exports,"__esModule",{value:!0});var t=require("react"),n=e(t),r=require("react-router-dom"),a=e(require("axios"));function i(e,t,n,r,a,i,o){try{var s=e[i](o),c=s.value}catch(e){return void n(e)}s.done?t(c):Promise.resolve(c).then(r,a)}function o(e){return function(){var t=this,n=arguments;return new Promise((function(r,a){var o=e.apply(t,n);function s(e){i(o,r,a,s,c,"next",e)}function c(e){i(o,r,a,s,c,"throw",e)}s(void 0)}))}}function s(){return(s=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function c(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function l(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(n)return(n=n.call(e)).next.bind(n);if(Array.isArray(e)||(n=function(e,t){if(e){if("string"==typeof e)return c(e,void 0);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?c(e,void 0):void 0}}(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0;return function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var u,d=(function(e){var t=function(e){var t=Object.prototype,n=t.hasOwnProperty,r="function"==typeof Symbol?Symbol:{},a=r.iterator||"@@iterator",i=r.asyncIterator||"@@asyncIterator",o=r.toStringTag||"@@toStringTag";function s(e,t,n){return Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{s({},"")}catch(e){s=function(e,t,n){return e[t]=n}}function c(e,t,n,r){var a=Object.create((t&&t.prototype instanceof d?t:d).prototype),i=new _(r||[]);return a._invoke=function(e,t,n){var r="suspendedStart";return function(a,i){if("executing"===r)throw new Error("Generator is already running");if("completed"===r){if("throw"===a)throw i;return{value:void 0,done:!0}}for(n.method=a,n.arg=i;;){var o=n.delegate;if(o){var s=b(o,n);if(s){if(s===u)continue;return s}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if("suspendedStart"===r)throw r="completed",n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);r="executing";var c=l(e,t,n);if("normal"===c.type){if(r=n.done?"completed":"suspendedYield",c.arg===u)continue;return{value:c.arg,done:n.done}}"throw"===c.type&&(r="completed",n.method="throw",n.arg=c.arg)}}}(e,n,i),a}function l(e,t,n){try{return{type:"normal",arg:e.call(t,n)}}catch(e){return{type:"throw",arg:e}}}e.wrap=c;var u={};function d(){}function p(){}function f(){}var m={};s(m,a,(function(){return this}));var h=Object.getPrototypeOf,g=h&&h(h(N([])));g&&g!==t&&n.call(g,a)&&(m=g);var v=f.prototype=d.prototype=Object.create(m);function x(e){["next","throw","return"].forEach((function(t){s(e,t,(function(e){return this._invoke(t,e)}))}))}function y(e,t){var r;this._invoke=function(a,i){function o(){return new t((function(r,o){!function r(a,i,o,s){var c=l(e[a],e,i);if("throw"!==c.type){var u=c.arg,d=u.value;return d&&"object"==typeof d&&n.call(d,"__await")?t.resolve(d.__await).then((function(e){r("next",e,o,s)}),(function(e){r("throw",e,o,s)})):t.resolve(d).then((function(e){u.value=e,o(u)}),(function(e){return r("throw",e,o,s)}))}s(c.arg)}(a,i,r,o)}))}return r=r?r.then(o,o):o()}}function b(e,t){var n=e.iterator[t.method];if(void 0===n){if(t.delegate=null,"throw"===t.method){if(e.iterator.return&&(t.method="return",t.arg=void 0,b(e,t),"throw"===t.method))return u;t.method="throw",t.arg=new TypeError("The iterator does not provide a 'throw' method")}return u}var r=l(n,e.iterator,t.arg);if("throw"===r.type)return t.method="throw",t.arg=r.arg,t.delegate=null,u;var a=r.arg;return a?a.done?(t[e.resultName]=a.value,t.next=e.nextLoc,"return"!==t.method&&(t.method="next",t.arg=void 0),t.delegate=null,u):a:(t.method="throw",t.arg=new TypeError("iterator result is not an object"),t.delegate=null,u)}function E(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function w(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function _(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(E,this),this.reset(!0)}function N(e){if(e){var t=e[a];if(t)return t.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var r=-1,i=function t(){for(;++r<e.length;)if(n.call(e,r))return t.value=e[r],t.done=!1,t;return t.value=void 0,t.done=!0,t};return i.next=i}}return{next:k}}function k(){return{value:void 0,done:!0}}return p.prototype=f,s(v,"constructor",f),s(f,"constructor",p),p.displayName=s(f,o,"GeneratorFunction"),e.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===p||"GeneratorFunction"===(t.displayName||t.name))},e.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,f):(e.__proto__=f,s(e,o,"GeneratorFunction")),e.prototype=Object.create(v),e},e.awrap=function(e){return{__await:e}},x(y.prototype),s(y.prototype,i,(function(){return this})),e.AsyncIterator=y,e.async=function(t,n,r,a,i){void 0===i&&(i=Promise);var o=new y(c(t,n,r,a),i);return e.isGeneratorFunction(n)?o:o.next().then((function(e){return e.done?e.value:o.next()}))},x(v),s(v,o,"Generator"),s(v,a,(function(){return this})),s(v,"toString",(function(){return"[object Generator]"})),e.keys=function(e){var t=[];for(var n in e)t.push(n);return t.reverse(),function n(){for(;t.length;){var r=t.pop();if(r in e)return n.value=r,n.done=!1,n}return n.done=!0,n}},e.values=N,_.prototype={constructor:_,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(w),!e)for(var t in this)"t"===t.charAt(0)&&n.call(this,t)&&!isNaN(+t.slice(1))&&(this[t]=void 0)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var t=this;function r(n,r){return o.type="throw",o.arg=e,t.next=n,r&&(t.method="next",t.arg=void 0),!!r}for(var a=this.tryEntries.length-1;a>=0;--a){var i=this.tryEntries[a],o=i.completion;if("root"===i.tryLoc)return r("end");if(i.tryLoc<=this.prev){var s=n.call(i,"catchLoc"),c=n.call(i,"finallyLoc");if(s&&c){if(this.prev<i.catchLoc)return r(i.catchLoc,!0);if(this.prev<i.finallyLoc)return r(i.finallyLoc)}else if(s){if(this.prev<i.catchLoc)return r(i.catchLoc,!0)}else{if(!c)throw new Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return r(i.finallyLoc)}}}},abrupt:function(e,t){for(var r=this.tryEntries.length-1;r>=0;--r){var a=this.tryEntries[r];if(a.tryLoc<=this.prev&&n.call(a,"finallyLoc")&&this.prev<a.finallyLoc){var i=a;break}}i&&("break"===e||"continue"===e)&&i.tryLoc<=t&&t<=i.finallyLoc&&(i=null);var o=i?i.completion:{};return o.type=e,o.arg=t,i?(this.method="next",this.next=i.finallyLoc,u):this.complete(o)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),u},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.finallyLoc===e)return this.complete(n.completion,n.afterLoc),w(n),u}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.tryLoc===e){var r=n.completion;if("throw"===r.type){var a=r.arg;w(n)}return a}}throw new Error("illegal catch attempt")},delegateYield:function(e,t,n){return this.delegate={iterator:N(e),resultName:t,nextLoc:n},"next"===this.method&&(this.arg=void 0),u}},e}(e.exports);try{regeneratorRuntime=t}catch(e){"object"==typeof globalThis?globalThis.regeneratorRuntime=t:Function("r","regeneratorRuntime = r")(t)}}(u={exports:{}}),u.exports),p=t.createContext({}),f=t.createContext({}),m=function(e){var i=e.children,s=e.caseNumber,c=e.role,l=r.useParams(),u="http://localhost:8000/v1/facl/chats/"+(s=s||l.number_case)+"/messages",f=t.useState({}),m=f[0],h=f[1],g=function(e){var n=t.useState([]),r=n[0],i=n[1],s=t.useState(!1),c=s[0],l=s[1],u=t.useState(),p=u[0],f=u[1],m=function(){var t=o(d.mark((function t(n){var r;return d.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,n&&l(!0),t.next=4,a.get(e);case 4:return r=t.sent,l(!1),i(r.data.data),t.abrupt("return",r.data.data);case 10:t.prev=10,t.t0=t.catch(0),f(t.t0);case 13:return t.prev=13,t.finish(13);case 15:case"end":return t.stop()}}),t,null,[[0,10,13,15]])})));return function(e){return t.apply(this,arguments)}}();return t.useEffect((function(){m(!0)}),[e]),{data:r,loading:c,error:p,getAll:m}}(u),v=g.data,x=g.loading,y=g.error,b=g.getAll,E=function(){var e=o(d.mark((function e(){return d.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,b(!1);case 2:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return t.useEffect((function(){setInterval((function(){E()}),1e4)}),[]),x?n.createElement("p",null,"...Loading"):(y&&n.createElement("p",null,y),v?n.createElement(p.Provider,{value:{data:v,URL:u,msg:m,role:c,handleMessage:function(e){e&&b(!1).then((function(){h(e)}))}}},i):null)},h=function(e){var r=e.handleFile,a=t.useRef({});return n.createElement("div",{className:"container_form_file",onChange:function(){null!==a.current&&r&&r(a.current.files)}},n.createElement("label",{htmlFor:"file-input",style:{cursor:"pointer"}},n.createElement("i",{className:"fa-solid fa-paperclip"})),n.createElement("input",{id:"file-input",multiple:!0,type:"file",ref:a,style:{display:"none"}}))},g=function(){var e=t.useContext(f),r=e.message,a=e.setMessage;return console.log(" message.attachments",r.attachments),n.createElement(n.Fragment,null,r.attachments.map((function(e,t){return n.createElement("div",{key:t,className:"attachment_container"},n.createElement("p",{className:"remove_text_file",key:t},e.name),n.createElement("img",{src:"https://customer.falabella.com/prd/cust/ctcm/ftc/corp/virtual-assistant/front/assets/images/close-icon.svg",className:"remove_file",onClick:function(){return function(e){var t=r.attachments;t.splice(e,1),a(s({},r,{attachments:t}))}(t)},alt:""}))})))},v=function(){var e=t.useContext(p),r=e.handleMessage,i=e.role,c=function(e){var n=t.useState(null),r=n[0],i=n[1],s=t.useState(!1),c=s[0],l=s[1],u=t.useState(null),p=u[0],f=u[1];return{post:function(){var t=o(d.mark((function t(n){var r;return d.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,l(!0),t.next=4,a.post(e,n);case 4:return i((r=t.sent).data),t.abrupt("return",r.data);case 9:t.prev=9,t.t0=t.catch(0),f(t.t0);case 12:return t.prev=12,t.finish(12);case 14:case"end":return t.stop()}}),t,null,[[0,9,12,14]])})));return function(e){return t.apply(this,arguments)}}(),postFile:function(){var t=o(d.mark((function t(n){var r,o,s,c;return d.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:for(o in r=new FormData,n)if("attachments"===o)for(s in n[o])r.append(o,n[o][s]);else r.append(o,n[o]);return t.prev=3,t.next=6,a.post(e,r,{headers:{"content-Type":"multipart/form-data"}});case 6:return i((c=t.sent).data),t.abrupt("return",c.data);case 11:t.prev=11,t.t0=t.catch(3),f(t.t0);case 14:return t.prev=14,l(!1),t.finish(14);case 17:case"end":return t.stop()}}),t,null,[[3,11,14,17]])})));return function(e){return t.apply(this,arguments)}}(),data:r,loading:c,error:p}}(e.URL),l=c.post,u=c.postFile,m={message:"",attachments:[],user:"hosting",role:i,sentiment:{}},v=t.useState(m),x=v[0],y=v[1],b=t.useState(36),E=b[0],w=b[1],_=t.useRef(null),N=function(e){e&&e.preventDefault(),x.message.length>0&&void 0!==x.attachments&&x.attachments.length>0?u(x).then((function(e){r(e),y(m)})):x.message.length>0?l(x).then((function(e){r(e),y(m)})):u(x).then((function(e){r(e),y(m)})),w(36)};return n.createElement(f.Provider,{value:{message:x,setMessage:y}},n.createElement("form",{onSubmit:N},n.createElement("div",{className:"container_form"},n.createElement(h,{handleFile:function(e){}}),n.createElement("div",{className:"input-group"},n.createElement("textarea",{ref:_,className:"form-control",value:x.message,placeholder:"Escribe un mensaje...",onChange:function(e){var t=e.target;w(t.scrollHeight),y(s({},x,{message:t.value}))},onKeyPress:function(e){if("Enter"===e.key&&!e.shiftKey)return e.preventDefault(),N(),!1},style:{height:E,maxHeight:"132px"}}),n.createElement("button",{className:"btn btn-outline-secondary"},n.createElement("i",{className:"fa-solid fa-paper-plane"})))),n.createElement(g,null)))},x=function(){function e(e,t){this.date=e,this.previusDate=t,this.now=new Date,this.days=["Domingo","Lunes","Martes","Miércoles","Jueves","Viernes","Sábado"],this.months=["Enero","Febrero","Marzo","Abril","Mayo","Junio","Julio","Agasto","Septiembre","Octubre","Noviembre","Diciembre"],this.date=e?new Date(e):void 0,this.previusDate=t?new Date(t):void 0}var t=e.prototype;return t.formateDate=function(e){if(this.date)switch(e){case"hh:mm":return this.date.getHours()+":"+this.addMinutes(this.date.getMinutes());case"day":return this.date.getDate();case"time_message":return this.messageTime();default:return this.date}},t.messageTime=function(){var e,t,n,r,a,i,o,s,c,l,u=null==(e=this.date)?void 0:e.getDate(),d=null==(t=this.previusDate)?void 0:t.getDate(),p=this.now.getDate();return void 0===d?p===u?"Hoy":u&&p-u==1?"Ayer":u&&p-u>=7?(null==(r=this.date)?void 0:r.getDate())+" de "+this.months[null==(a=this.date)?void 0:a.getMonth()]+" de "+(null==(i=this.date)?void 0:i.getFullYear()):this.days[null==(n=this.date)?void 0:n.getDay()]:u&&u!==d?p===u?"Hoy":p-u==1?"Ayer":p-u>=7?(null==(s=this.date)?void 0:s.getDate())+" de "+this.months[null==(c=this.date)?void 0:c.getMonth()]+" de "+(null==(l=this.date)?void 0:l.getFullYear()):this.days[null==(o=this.date)?void 0:o.getDay()]:void 0},t.addMinutes=function(e){return e>=0&&e<9?"0"+e:e},t.format=function(e){return this.formateDate(e)},e}(),y=function(e){var r=e.msg,a=t.useContext(p),i=r.message,o=r.timestamp,s=r.attachments,c=r.sentiment,l=function(e){return"neutral"===e?"😐":"positive"===e?"😀":"negative"===e?"😡":void 0},u=function(e){return n.createElement(n.Fragment,null,e.files.map((function(e,t){return n.createElement("div",{className:"container_file",key:t},n.createElement("div",{className:"container_download"},n.createElement("i",{className:"fa-solid fa-file"}),n.createElement("span",null,(r=e.name).length>20?r.slice(0,r.length-(r.length-20))+"...":r),n.createElement("i",{className:"fa-solid fa-download",style:{float:"right",cursor:"pointer"},onClick:function(){}})));var r})))};return n.createElement("div",null," ",a.role===r.role?n.createElement("div",{className:"message_user"},n.createElement("div",{className:"message_user_text"},n.createElement("div",{style:{display:"flex",justifyContent:"flex-end"}},l(c)),i,s&&s.length>0&&n.createElement(u,{files:s}),n.createElement("div",{className:"container_hora_message"},n.createElement("span",{style:{float:"right"}},new x(o).format("hh:mm")," hrs. ")))):n.createElement("div",{className:"message_agente"},n.createElement("div",{className:"message_agente_text"},n.createElement("div",{style:{display:"flex",justifyContent:"flex-start"}},l(c)),i,s&&s.length>0&&n.createElement(u,{files:s}),n.createElement("div",{className:"container_hora_message"},n.createElement("span",{style:{float:"right"}},new x(o).format("hh:mm")," hrs. ")))))},b=function(){var e=t.useRef(null),r=t.useRef([]),a=t.useContext(p),i=a.data,o=a.msg,s=t.useState(0),c=s[0],l=s[1];t.useEffect((function(){i&&i.length>0&&(console.log("Número de mensajes -> "+c),null!==e.current&&(e.current.scrollTop=e.current.scrollHeight))}),[c,i]),t.useEffect((function(){c!==i.length&&l(i.length)}),[i,o,c]);var u=function(e){var t=e.index,r=e.array;return n.createElement("div",{className:"container_message_time"},n.createElement("div",{className:"container_message_text"},new x(e.msg.timestamp,r[t-1]?r[t-1].timestamp:void 0).format("time_message")))};return n.createElement("div",{className:"container_message mb-4",ref:e},i.map((function(e,t,a){return n.createElement("div",{ref:function(n){return null==n||n.setAttribute("timestamp",e.timestamp),r.current[t]=n},key:String(e._id)},n.createElement(u,{msg:e,index:t,array:a}),n.createElement(y,{msg:e}))})))};function E(e,t){void 0===t&&(t={});var n=t.insertAt;if(e&&"undefined"!=typeof document){var r=document.head||document.getElementsByTagName("head")[0],a=document.createElement("style");a.type="text/css","top"===n&&r.firstChild?r.insertBefore(a,r.firstChild):r.appendChild(a),a.styleSheet?a.styleSheet.cssText=e:a.appendChild(document.createTextNode(e))}}E(".container_header {\n  padding: 10px;\n  border-bottom: 4px solid #ff6200; }\n\n.container_title_video_call {\n  display: flex;\n  justify-content: space-between; }\n\n.container_title_video_call p {\n  text-align: left;\n  font-size: 25px;\n  padding: 6px;\n  margin: 0; }\n\n.container_message {\n  display: block;\n  width: 100%;\n  padding: 0px 10px 0px 10px;\n  max-height: 500px;\n  min-height: 500px;\n  overflow-y: auto;\n  font-size: 12px; }\n\n.container_message_time {\n  display: flex;\n  justify-content: center;\n  width: 100%; }\n\n.container_message_text {\n  max-width: 50%;\n  min-width: 20%;\n  text-align: center;\n  opacity: .5; }\n\n.line_message_time {\n  border-bottom: 1px solid gray;\n  text-align: center;\n  width: 50%;\n  position: relative;\n  top: -7px;\n  opacity: .3; }\n\n.container_is_now {\n  width: 100%;\n  font-size: 20px;\n  position: absolute;\n  display: flex;\n  justify-content: center;\n  z-index: 1; }\n  .container_is_now div {\n    width: 20%;\n    text-align: center;\n    font-family: Tahoma; }\n\n.message_user {\n  display: flex;\n  justify-content: flex-end;\n  width: 100%;\n  overflow: hidden;\n  margin-bottom: 10px; }\n\n.message_agente {\n  display: flex;\n  justify-content: flex-start;\n  width: 100%;\n  overflow: hidden;\n  margin-bottom: 10px; }\n\n.message_user_text {\n  position: relative;\n  display: flex;\n  flex-direction: column;\n  background-color: #e4ebf7;\n  padding: 10px;\n  border-radius: 15px 15px 0px 15px;\n  max-width: 400px; }\n\n.message_agente_text {\n  position: relative;\n  display: flex;\n  flex-direction: column;\n  background-color: #f5f5f5;\n  padding: 10px;\n  border-radius: 15px 15px 15px 0px;\n  max-width: 400px; }\n\n.message_date {\n  text-align: center;\n  padding: 16px 0;\n  font-size: 12px;\n  color: #999; }\n\n.container_hora_message {\n  font-size: 10px;\n  float: right;\n  font-style: oblique;\n  margin-top: 4px; }\n\n.container_form {\n  display: flex;\n  margin: 20px; }\n\n.text_area_input {\n  max-height: 200px;\n  height: 20px; }\n\n.container_form_file {\n  font-size: x-large;\n  margin-right: 10px;\n  cursor: pointer; }\n\n.container_file {\n  display: flex;\n  min-width: 380px;\n  padding-top: 10px;\n  padding-bottom: 10px;\n  padding-left: 10px;\n  padding-right: 10px;\n  margin-top: 10px;\n  background-color: #d0d0d0;\n  border-radius: 3px; }\n\n.container_download {\n  display: block;\n  width: 100%; }\n\n.container_download span {\n  font-size: 12px;\n  margin-left: 10px; }\n\n.container_download i {\n  font-size: 20px; }\n\n/*VIDEO CALL*/\n.container_video_call {\n  display: flex;\n  justify-content: space-evenly;\n  padding: 10px; }\n\n@media (max-width: 600px) {\n  .message_user_text {\n    position: relative;\n    display: flex;\n    flex-direction: column;\n    background-color: #e4ebf7;\n    padding: 10px;\n    border-radius: 15px 15px 0px 15px;\n    max-width: 200px; }\n  .message_agente_text {\n    position: relative;\n    display: flex;\n    flex-direction: column;\n    background-color: #f5f5f5;\n    padding: 10px;\n    border-radius: 15px 15px 15px 0px;\n    max-width: 200px; }\n  .container_file {\n    display: flex;\n    padding-top: 10px;\n    padding-bottom: 10px;\n    padding-left: 10px;\n    padding-right: 10px;\n    margin-top: 10px;\n    background-color: #d0d0d0;\n    border-radius: 3px; } }\n\n.attachment_container {\n  background: #DDDDDD;\n  width: 60%;\n  min-width: 60%;\n  height: auto;\n  margin: 10px 20px;\n  padding: 5px;\n  border-radius: 4px;\n  display: flex;\n  justify-content: space-between; }\n\n.remove_text_file {\n  color: #333;\n  font-weight: 500;\n  display: table-cell;\n  margin: 0; }\n\n.remove_file {\n  cursor: pointer;\n  float: right;\n  margin: 5px; }\n\n.body {\n  font-family: Lato, sans-serif; }\n\n.pannel {\n  background-color: #fff;\n  border-radius: 5px;\n  margin-bottom: 15px !important;\n  padding: 20px 40px; }\n  .pannel--shadow {\n    box-shadow: #4a4a4a 0px 0px 5px 0px; }\n\n.button {\n  background-color: #495867;\n  font-size: 19px;\n  font-weight: 400;\n  position: relative;\n  width: 220px;\n  text-align: center;\n  height: auto;\n  line-height: 22.8px;\n  min-height: 35px;\n  border-radius: 24px;\n  border: 0;\n  color: white;\n  align-self: center; }\n  .button:hover {\n    background-color: #4a4a4a; }\n\na {\n  color: #fff; }\n\np {\n  margin: 0; }\n"),E(".Portal-header {\n  background: linear-gradient(17.56deg, #ff9401 63.22%, #ff7b01 105.58%, #ff6c01 144.92%);\n  height: 70px;\n  background-position: left;\n  background-repeat: no-repeat;\n  display: flex;\n  flex-direction: column;\n  align-items: center;\n  justify-content: center;\n  font-size: calc(10px + 2vmin);\n  color: #333; }\n\n.logo_background {\n  background: linear-gradient(272deg, #ff6200 0%, #ff861b 95.09%);\n  border-radius: 1653px 0px 0px 1653px;\n  width: 190px;\n  height: 70px;\n  text-align: left;\n  transform: rotate(180deg);\n  margin-left: 0;\n  margin-right: auto;\n  cursor: pointer; }\n\n.fala_logo {\n  transform: rotate(180deg);\n  height: 100%;\n  width: 85%;\n  padding-right: 10px;\n  padding-left: 10px; }\n");var w=function(){window.location.href="/portal"};E("body {\n  height: 100%;\n  background-color: #f5f5f5;\n}\n\n.Orders {\n  margin: 0px;\n}\n\n.title {\n  font-size: 22px;\n  line-height: 27px;\n  font-weight: 700;\n  color: rgb(51, 51, 51);\n}\n\n.subtitle {\n  font-size: 1em;\n  color: rgb(51, 51, 51);\n  margin: 0;\n  margin-right: 10px;\n}\n\n.input-container {\n  display: flex;\n  margin-bottom: 15px;\n}\n\ninput {\n  height: 20px;\n  width: 220px;\n  border: 1px solid #888;\n  font-family: inherit;\n  line-height: inherit;\n  font-size: 1.6rem;\n  background: #fff;\n  outline: none;\n  border-radius: 4px;\n  box-sizing: content-box;\n  padding: 0 10px;\n  font-size: 16px;\n  color: #333;\n  /* text-align: center; */\n}\n\n.orders-pagination{\n  display: flex;\n  justify-content: center;\n  margin-bottom: 15px;\n}\n\n.orders-pagination p{\n  margin: 0px 5px;\n}\n\n.arrow {\n  cursor: pointer;\n}");var _=function(){var e=o(d.mark((function e(t,n){return d.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return void 0===n&&(n=1),e.prev=1,e.next=4,a.get("http://localhost:8000/v1/facl/orders/?email="+t+"&page="+n);case 4:return e.abrupt("return",e.sent.data.data);case 8:return e.prev=8,e.t0=e.catch(1),console.log(e.t0),e.abrupt("return",null);case 12:case"end":return e.stop()}}),e,null,[[1,8]])})));return function(t,n){return e.apply(this,arguments)}}(),N={HOME_DELIVERY:"Entregado el",PICKUP_FROM_STORE:"Retiro en tienda"},k={DELIVERED:"Compra entregada",IN_PROCESS:"Solicitud recibida",WITH_INVOICE:"Compra confirmada",SHIPMENT_IN_PROCESS:"Compra en camino",CANCELED:"Compra cancelada"};E(".card-title-container {\n  display: flex;\n  justify-content: space-between; }\n\n.card-title {\n  font-size: 1.2rem;\n  font-weight: 700;\n  padding-left: 0px;\n  margin: 0;\n  padding: 0;\n  border: 0; }\n\n.order-date {\n  font-size: 0.8rem; }\n\n.product-img {\n  height: 75px; }\n\n.order-card__info {\n  margin: 0; }\n\n.card-content {\n  display: flex;\n  justify-content: space-between; }\n\n.order-card-number {\n  font-size: 14px;\n  font-weight: 400;\n  color: #4a4a4a;\n  text-align: left;\n  margin: 0; }\n\n.order-card-deliveryMethod {\n  font-size: 16px;\n  font-weight: 700;\n  color: #4a4a4a;\n  text-align: left;\n  padding-bottom: 10px;\n  margin: 0; }\n\n.order-card-deliveryStatus {\n  font-size: 14px;\n  font-weight: 400;\n  color: #4a4a4a;\n  text-align: left;\n  padding-bottom: 10px;\n  padding-left: 10px;\n  margin: 0; }\n\n.order-card-status {\n  display: flex; }\n\n.order-card--actions {\n  display: flex;\n  justify-content: space-between;\n  align-items: center; }\n");var S=function(e){var t=e.order,r=t.createdAt.split(" ")[0];return n.createElement(n.Fragment,null,n.createElement("div",{className:"order-card"},n.createElement("div",{className:"card-title-container"},n.createElement("p",{className:"card-title"},"Compra online"),n.createElement("label",{className:"order-date"},"Fecha de la compra: ",r)),n.createElement("div",{className:"order-card__detail"},t.deliveryOrders.map((function(e,t){var r,a,i,o;return n.createElement("div",{key:t},n.createElement("hr",null),n.createElement("div",{className:"card-content"},n.createElement("div",{className:"order-card--product"},n.createElement("p",{className:"order-card-number"},"Pedido Nº: ",e.reservationNumber),n.createElement("label",{className:"order-card-deliveryMethod"},N[o=e.deliveryMethod]||o," ",null==e||null==(r=e.deliveryInfo)||null==(a=r.deliveredDate)?void 0:a.split(" ")[0]),n.createElement("div",{className:"order-card-status"},n.createElement("div",{className:"product_container__img"},n.createElement("img",{className:"product-img",alt:"",src:e.shipments[0].orderLines[0].item.imageUrl})),n.createElement("p",{className:"order-card-deliveryStatus"},"Estado: ",k[i=e.shipments[0].currentStatus]||i))),n.createElement("div",{className:"order-card--actions"},n.createElement("button",{className:"button",onClick:function(t){window.location.href="/cases-chat/user?orderNumber="+e.reservationNumber}},"Abrir conversación"))))})))))},D=function(e){for(var t,n=l(e.customerOrders);!(t=n()).done;)for(var r,a=l(t.value.deliveryOrders);!(r=a()).done;)(i=r.value).shipments[0].currentStatus=function(e){var t="";switch(e){case"PAYMENT_PENDING":t="Pendiente de pago";break;case"IN_PROCESS":t="Reservado";break;case"WITH_INVOICE":case"PAYMENT_CONFIRMED":case"SHIPMENT_IN_PROCESS":case"BROKEN":case"DELAYED":t="Pedido en curso";break;case"DELIVERED":t="Pedido finalizado";break;case"READY_TO_PICKUP":t="Listo para retiro";break;case"CANCELED":t="Pedido cancelado";break;case"EXPIRED":t="Pedido expirado";break;default:t=e}return t}(i.shipments[0].currentStatus),i.deliveryMethod=function(e){switch(e){case"PICKUP_FROM_STORE":e="Retiro en tienda";break;case"HOME_DELIVERY":case"DELIVERED":e="Despacho a domicilio";break;default:e="Sin información"}return e}(i.deliveryMethod);var i};exports.Chat=function(e){var t=e.caseNumber,a=e.role;return r.useParams(),n.createElement(m,{caseNumber:t,role:a},n.createElement("div",{className:"card"},n.createElement("div",{className:"container_header"},n.createElement("div",{className:"container_title_video_call"},n.createElement("p",{style:{textAlign:"left"}}," Chat Asíncrono :).. "))),n.createElement("div",null,n.createElement(b,null),n.createElement(v,null))))},exports.Header=function(){return n.createElement("header",{className:"Portal-header"},n.createElement("div",{onClick:w,className:"logo_background"},n.createElement("img",{className:"fala_logo",src:"https://images.falabella.com/v3/assets/blt7c5c2f2f888a7cc3/blt9f6f7671ced09c38/6126b34e8e16ab655b346002/hr-1-logo-desktop.svg"})))},exports.Orders=function(){var e=t.useState({}),r=e[0],a=e[1],i=t.useState(""),s=i[0],c=i[1],l=function(){var e=o(d.mark((function e(t,n){var r;return d.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,_(t,n);case 2:(r=e.sent)&&(D(r),a(r));case 4:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}();return n.createElement("div",{className:"Orders"},n.createElement("div",{className:"Orders-body"},n.createElement("div",{className:"orders-search pannel"},n.createElement("p",{className:"title"},"Revisión de casos y compras"),n.createElement("div",{className:"input-container"},n.createElement("p",{className:"subtitle"},"Ingrese su email:"),n.createElement("input",{className:"search_inputs",key:"email",value:s,type:"text",onInput:function(e){return c(e.currentTarget.value)}})),n.createElement("button",{className:"button",onClick:function(e){return l(s)}},"Ver detalle")),r&&r.pagination&&r.pagination.totalPages>1&&n.createElement("div",{className:"orders-pagination"},n.createElement("div",{className:"before-arrow arrow",onClick:function(e){var t;(t=r.pagination).page-1<1||l(s,t.page-1)}},"<"),n.createElement("p",null,"Página ",r.pagination.page," de ",r.pagination.totalPages),n.createElement("div",{className:"next-arrow arrow",onClick:function(e){var t;(t=r.pagination).page+1>t.totalPages||l(s,t.page+1)}},">")),r&&r.customerOrders&&r.customerOrders.map((function(e,t){return n.createElement("div",{key:t,className:"orders-container pannel"},n.createElement(S,{order:e}))}))))};
//# sourceMappingURL=jnra-product-card.cjs.production.min.js.map
